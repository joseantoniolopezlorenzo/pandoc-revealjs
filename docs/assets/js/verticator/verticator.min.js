(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.Verticator=t())})(this,function(){"use strict";var e=function(){try{document.querySelector(":scope *")}catch(e){!function(e){function t(e){return function(t){if(t&&r.test(t)){var i="q"+Math.floor(9e6*Math.random())+1e6;arguments[0]=t.replace(r,"["+i+"]"),this.setAttribute(i,"");var o=e.apply(this,arguments);return this.removeAttribute(i),o}return e.apply(this,arguments)}}var r=/:scope(?![\w-])/gi,i=t(e.querySelector);e.querySelector=function(e){return i.apply(this,arguments)};var o=t(e.querySelectorAll);if(e.querySelectorAll=function(e){return o.apply(this,arguments)},e.matches){var n=t(e.matches);e.matches=function(e){return n.apply(this,arguments)}}if(e.closest){var a=t(e.closest);e.closest=function(e){return a.apply(this,arguments)}}}(Element.prototype)}var e=function(e){for(var t=e.parentNode.children,r=0;r<t.length;r++)if(t[r]==e)return r},t=function(t,r){var i=t.getRevealElement(),o=i.querySelector("ul.verticator");if(!o){var n=document.createElement("ul");n.className+="verticator",i.insertBefore(n,i.childNodes[0]),o=i.querySelector("ul.verticator")}var a="active",c=function(e,t){var r=e.querySelectorAll(t),i=Array.prototype.slice.call(r);return i},l=function(r){if(r.target.matches(".verticator li a")){var i=t.getIndices().h,o=t.getIndices().v,n=e(r.target.parentNode);r.preventDefault(),t.slide(i,n,o)}},u=function(e){var t=c(o,"li"),r=-1;t.forEach(function(t,i){parseInt(t.getAttribute("data-index"))<=e.indexv&&(r=i),t.classList.remove(a)}),r>=0&&t[r].classList.add(a)},s=function(e,t){o.classList.remove("visible");var i="";t.forEach(function(t){var o=' href="#/'+e.indexh+"/"+t+'"';i+='<li data-index="'+t+'"><a '+(r.clickable?o:"")+"></li>"}),setTimeout(function(){o.innerHTML=i,u(e),o.classList.add("visible")},200)},f=function(){var e=r.darktheme?"light":"dark",t=r.darktheme?".dark-theme":"";if(r.darktheme&&i.classList.add("dark-theme"),r.color||r.oppositecolor){var o="";if(r.color){var n=t+" ul.verticator li a:after { background-color: "+r.color+"; }";if(o+=n,!r.darktheme){var a=".has-light-background ul.verticator li a:after { background-color: "+r.color+"; }";o+=a}}if(r.oppositecolor){var c=t+".has-"+e+"-background ul.verticator li a:after { background-color: "+r.oppositecolor+"; }";o+=c}if(o.length){var l=document.createElement("style");l.textContent=o,document.head.appendChild(l)}}},d=function(e){var t=e.currentSlide,i=t.parentNode,n=Array.from(i.children).map(function(e,t){return[t,e]}).filter(function(e){return"SECTION"==e[1].tagName&&(!r.skipuncounted||"uncounted"!==e[1].getAttribute("data-visibility"))}).map(function(e){return e[0]});if(i.classList.contains("stack")){if(n.length>1){if(e.previousSlide){var a=e.previousSlide.parentNode;i!=a&&s(e,n)}else s(e,n);setTimeout(function(){u(e)},150)}}else o.classList.remove("visible")};o&&(f(),t.on("slidechanged",function(e){d(e)}),t.on("ready",function(e){d(e)}),t.getConfig().embedded&&t.on("click",function(e){l(e)}))},r=function(e){var r={darktheme:!1,color:"",oppositecolor:"",skipuncounted:!1,clickable:!0},i=function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])},o=e.getConfig().verticator||{};i(o,r),t(e,o)};return{id:"verticator",init:r}};return e});